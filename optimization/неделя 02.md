$\mathbb{R}^n$ — n-мерное пространство вещественных векторов, евклидово конечномерное пространство

$\mathbb{R}_+^n=\{x\in\mathbb{R}^n|x_i\ge 0\}$ — неотрицательный ортант $\mathbb{R}^n$, то есть это n-мерное пространство вещественных векторов, у которых все компоненты неотрицательны

$\mathbb{R}_{++}^n=\{x\in\mathbb{R}^n|x_i > 0\}$ — положительный ортант $\mathbb{R}_+^n$, то есть это все векторы,  у которых компоненты строго положительны

$\langle x,y \rangle = x^Tx=\sum_{i}^nx_iy_i$ — евклидово скалярное произведение

$||x||_2 = \sqrt{\langle x,y \rangle}$ — евклидова норма $l_2$ 

$\mathbb{S}^n$ — пространство симметричных матриц порядка n

# аффинные множества

Множество $X \subseteq \mathbb{R}^n$ — аффинное, если вместе с любой парой точек $x_1, x_2 \in X$ оно содержит все точки вида $x_\theta = \theta x_1 + (1- \theta)x_2$ при $\theta \in \mathbb{R}^1$. 

$x_\theta = \theta x_1 + (1- \theta)x_2$ — аффинная комбинация

Аффинное множество — это такое множество, для которого вместе с каждой парой точек во множестве содержится и вся прямая, их соединяющая. 

## Примеры

- $\mathbb{R}^n$, прямая, гиперплоскость
- точка, $\varnothing$ — пустое множество
- решение системы линейных уравнений
$$X= \{x\in\mathbb{R}^n|Ax=b\}$$
Возьмем $x_1, x_2\in X$ и любой коэффициент $\theta \in \mathbb{R}$. Для того, чтобы проверить, что условие выполняется, смотрим, чему равно $Ax\theta$
$$Ax_\theta=A(\theta x_1+(1-\theta)x_2)=$$
раскрываем скобки
$$=\theta Ax_1+ (1-\theta)Ax_2=$$
замечаем, что $Ax_1$ лежит в множестве $X$, а это значит, что $Ax_1$ — это $b$ и аналогично $Ax_2$  — это тоже $b$
$$= \theta b+(1-\theta)b=b$$
получается, что 
$$Ax_\theta=b$$
значит $x_\theta \in X$, а из этого следует, что $X$ — аффинное.

## структура аффинного множества

По сути все аффинные множества — это сдвиги линейных подпространств.

### теорема

Пусть $X\subseteq \mathbb{R}^n$ — аффинное множество. Тогда для любого $x_0$ множество $L=X-x_0$  — это линейное подпространство. $L$ — единственное и не зависит от выбора $x_0$.

**доказательство**

Пусть $y_1,y_2\in X,\theta \in \mathbb{R}$. Вычтем из обоих $x_0$
$$x_1=y_1-x_0,x_2=y_2-x_0\in L$$
По определению множества $L$ и $x_1$, и $x_2$ лежат в множестве $L$.

Рассмотрим их аффинную комбинацию:
$$\begin{aligned}
x_\theta &= \theta x_1+(1-\theta)x_2= \\
&=\theta y_1-\theta x_0+y_2-x_0-\theta y_2+\theta x_0= \\
&=\theta y_1 +(1-\theta)y_2-x_0
\end{aligned}$$
Получившаяся комбинация аффинная, потому что по условию $\theta \in \mathbb{R}$,  и она лежит в множестве $X$.

То есть $L$ — аффинное множество.


Покажем, что нулевой элемент лежит в $L$. Так как $x_0$ лежит в $X$, то нулевой элемент лежит в $L$, потому что по условию $L=X-x_0$:
$$x_0-x_0=0_n\in L$$
Покажем, что умножение на любой число замкнуто относительно $L$. Для любого элемента $x$ из $L$ и коэффициента $\theta \in \mathbb{R}$
$$\theta x=\theta x+ (1-\theta)0_n\in L$$
Покажем, что сложение двух векторов замкнуто относительно $L$. Возьмем два произвольных вектора $x_1, x_2\in L$ и коэффициент $\theta=1/2$
$$x=\frac{1}{2}x_1+\frac{1}{2}x_2\in L$$
$$2x=x_1+x_2\in L$$
Значит $L$ — это линейное подпространство.

## определения

### аффинная комбинация точек

Пусть $x_1,\ldots, x_k\in G$, тогда $\sum_{i=1}^n\theta_i=1$.  Линейная комбинация $k$ точек с такими коэффициентами будет являться **аффинной комбинацией точек**
$$\theta_1x_1+\ldots+\theta_kx_k$$

### аффинная оболочка множества

Все аффинные комбинации точек множества образуют аффинную оболочку множества
$$\bigg\{\sum_{i=1}^k\theta_ix_i|x_i\in G,\sum_{i=1}^k\theta_i=1\bigg\}$$
Аффинная оболочка $\mathbf{aff}(G)$ — это наименьшее аффинное множество, содержащее $G$.

## свойства аффинных множеств

- Множество является аффинным тогда и только тогда, когда в него входят все аффинные кобминации его точек.

- Пересечение (конечное или бесконечное) аффинных множеств — аффинное множество.

- Любое аффинное множество можно представить в виде системы линейных уравнений
$$X=\{x\in\mathbb{R}^n|Ax=b\}$$

# выпуклые множества

Множество $X\subseteq \mathbb{R}^n$ — **выпуклое**, если вместе с любой парой точек $x_1, x_2\in X$ оно содержит все точки вида $x_\theta=\theta x_1+(1-\theta)x_2$ при $\theta\in [0,1]$.

Выпуклое множество — это такое множество, в котором вместе с каждой парой точек, содержится и весь отрезок, который их соединяет.

### примеры

- любое аффинное множество — выпуклое
- луч, отрезок
- шар по норме в $\mathbb{R}^n$

Для того, чтобы формально показать, что это выпуклое множество нужно взять две точки этого множества, записать их выпуклую комбинацию и проверить, что точка $x_\theta$, которая является в данном случае выпуклой комбинацией точек, удовлетворяет условиям, которые определяют множество.
$$B(x_c,r)=\{x\in\mathbb{R}^n \ | \ ||x- x_c||\le r\}$$
То есть шар — это все такие точки $x$, которые удовлетворяют тому, что норма разности меньше радиуса.

Пусть точки лежат в шаре $x_1,x_2\in B(x_c,r),\theta\in [0,1]$. Нужно проверить, что $x_\theta\in B(x_c, r)$

Подставим $x_\theta$ в норму, которую будем оценивать сверху
$$\begin{aligned}
||x_\theta-x_c||= &||\theta x_1+(1-\theta)x_2 - x_c||\le \\
& || \theta (x_1-x_c) + (1-\theta)(x_2-x_c) ||\le \\
& \theta||(x_1-x_c)|| + (1-\theta)||x_2-x_c|| \le r
\end{aligned}$$
- эллипсоид
Эллипсоид задается следующим образом. Есть точки, которые удовлетворяют следующим неравенствам
$$\mathcal{E}(x_c, P)=\{x\in\mathbb{R}^n|(x-x_c)^TP^{-1}(x-x_c)\le1\}$$
где $P$ — это симметричная положительно определенная матрица $P=P^T\succ 0$

- решение системы линейных неравенств
$$\{x \in \mathbb{R}|Ax\le b, A\in \mathbb{R}^{m\times n}, b \in \mathbb{R}^n\}$$

- гиперплоскость
$$\{x\in\mathbb{R}^n|a^Tx=b,a\ne0\}$$
- полупространство
$$\{x\in\mathbb{R}^n|a^Tx\le b,a\ne0\}$$
- полиэдр (многогранник)
$$\{x\in\mathbb{R}^n|Ax\preceq b,Cx=d\}$$
Это пересечение конечного числа полупространств и гиперплоскостей.

## выпуклая комбинация точек

Пусть $x_1, \ldots, x_k\in G$, тогда при $\sum_{i=1}^n\theta_i, \theta_i\ge0$ точка $\theta_1x_1+\ldots+\theta_kx_k$ — это выпуклая комбинация точек.

## выпуклая оболочка множества

Множество всех выпуклых комбинаций точек
$$\bigg\{\sum_{i=1}^k\theta_ix_i|x_i \in G,\sum_{i=1}^k\theta_i=1,\theta_i\ge0\bigg\}$$
называется выпуклой оболочкой $\operatorname{conv}(G)$.

Выпуклой оболочкой множества будет являться наименьшее выпуклое множество, содержащее $G$.

## теорема Каратеодори

Пусть $X\subseteq \mathbb{R}^n$ — произвольное множество в $\mathbb{R}^n$. Тогда любую точку из его выпуклой оболочки $\operatorname{conv}(G)$ можно представить в виде выпуклой комбинации не более чем $n+1$ точек из $X$.

## утверждение

Множество $G$ выпукло тогда и только тогда, когда $G = \operatorname{conv}(G)$.

## как установить выпуклость множества

### по определению

Берем две точки из множества $x_1, x_2 \in X$, произвольный коэффициент $\theta\in[0,1]$, расписываем выпуклую комбинацию и проверяем ее принадлежность множеству $X$
$$x_\theta=\theta x_1+(1-\theta)x_2\in X$$

### второй способ

Постараться показать, что множество $X$ получено из выпуклых множеств, с помощью операций, сохраняющих выпуклость.

## операции, сохраняющие выпуклость

### умножение выпуклого множества на число

Пусть есть два множества $X_1, X_2 \subseteq \mathbb{R}^n$
$$\alpha X=\{\alpha x| x\in X\}$$
где $\alpha \in \mathbb{R}^1$

Множество $X$ выпуклое, возьмем из него две точки $x_1, x_2$, в силу выпуклости их выпуклая комбинация тоже лежит в этом множестве $x_\theta \in X$.

Теперь необходимо проверить выпуклость множества $\alpha X$. Возьмем две произвольные точки из этого множества $\alpha x_1, \alpha x_2\in \alpha X$. Их выпуклая комбинация
$$\overline{x_\theta} =\theta\alpha x_1+(1-\theta)\alpha x_2=\alpha x_\theta$$
$x_\theta$ лежит в $X$, а значит $\alpha x_\theta$ лежит в $\alpha X$. Значит $\alpha X$ выпуклое.

### сумма Минковского

Это сумма двух выпуклых множеств $X_1,X_2\subseteq\mathbb{R}^n$. Если сложить два выпуклых множества, то есть взять все попарные суммы элементов этих множеств
$$X=X_1 + X_2 = \{y+z| y\in X_1, z\in X_2\}$$
то в результате множество будет выпуклое.

**доказательство**

Возьмем две точки $x_1, x_2 \in X$ и рассмотрим их выпуклую комбинацию. Тогда найдутся $y_1, y_2\in X_1$ и $z_1,z_2 \in X_2$ такие, что
$$x_1 = y_1+z_1$$
$$x_2=y_2+z_2$$
Рассмотрим выпуклую комбинацию $x_\theta$
$$\begin{aligned}
x_\theta &= \theta x_1+(1-\theta)x_2=\\
&= \theta y_1 + (1-\theta)y_2+\theta z_1+(1-\theta)z_2= \\
&=y_\theta + z_\theta
\end{aligned}$$

получается
$$x_\theta=y_\theta+z_\theta\in X$$
а это значит, что $X$ выпуклое.

**пример**

Пусть есть единичный шар и единичный шар в норме бесконечности
$$\begin{aligned}
X_1&=\{x\in\mathbb{R}^2|x^2_1+x^2_2\le 1\} \\
X_2&=\{x\in\mathbb{R}^2|x_1,x_2\in[-1,1]\}
\end{aligned}$$
тогда их сумма $X=X_1+X_2$ — выпукло, как сумма выпуклых множеств.

### декартово произведение

Декартово произведение двух множеств $X_1$ и $X_2$ будет выпуклым
$$X_1 \times X_2 = \{(y,z)| y\in X_1, z\in X_2\}$$
**пример**

Пусть есть цилиндр в $\mathbb{R}^3$, который определяется следующим образом
$$X=\{x\in\mathbb{R}^3|x_1^2+x_2^2\le 1, x_3\in[-1,1]\}$$
$X$ выпукло как декартово произведение выпуклых множеств (единичного круга и отрезка).


### пересечение множеств

Пересечение $X = \bigcap X_i$ любого конечного или бесконечного числа выпуклых множеств будет выпуклым.

**доказательство**

Пусть $I$ — произвольное множество индексов. Пусть есть семейство выпуклых множеств $X_i \subseteq \mathbb{R}^n$.
Покажем, что пересечение выпуклое
$$X=\bigcap_{i\in I}X_i$$
Если $X=\varnothing$, то $X$ выпуклое по определению.

Если $X\ne \varnothing$, тогда пусть существуют две точки $x_1,x_2 \in X$. Если они лежат в множестве $X$, которое является пересечением, то они лежат и в каждом множестве $X_i, \forall i \in I$

Так как $X_i$ — выпуклое, то для любого коэффициента $\theta$ выпуклая комбинация $x_\theta$ лежит в $X_i$
$$x_\theta=\theta x_1+ (1-\theta)x_2\in X_i \forall i \in I$$
Следовательно, так как $x_\theta$ лежит в каждом $X_i$, оно лежит и в пересечении. 

Если выпуклая комбинация двух элементов из множества лежит в множестве, значит само множество выпукло.

### аффинное отображение

Аффинное отображение выпуклого множества будет выпуклым.

Аффинная функция — это функция, которая представима в виде
$$f(x)=Ax+b$$
где $f:\mathbb{R}^n\to\mathbb{R}^n, A\in\mathbb{R}^{m\times n}, b\in \mathbb{R}^m$

Пусть есть выпуклое множество $X\subseteq\mathbb{R}^n$, тогда его образ будет выпуклым множеством, если $f$ — это аффинная функция
$$f(X)=\{f(x)|x\in X \}$$
Можно утверждать, что прообраз любого выпуклого множества в случае, когда $f$ аффинная функция, также является выпуклым множеством
$$f^{-1}(G)=\{x\in \mathbb{R}^n|f(x)\in G\}$$

С помощью аффинных функций можно задавать растяжение, проекцию и перенос.

**пример**

Рассмотрим эллипсоид в $\mathbb{R}^n$
$$f(X)=\{Lx+a|x\in\mathbb{R}^n,||x||_2\le1\}$$
где $L\in\mathbb{R}^{n\times n}$ — невырожденная матрица, то есть квадратная матрица, определитель которой не равен нулю, $a\in \mathbb{R}^n$ — вектор, $f(x)$ — аффинная функция
$$f(x)=Lx+a$$
Тогда эллипсоид выпуклый как образ выпуклого множества (единичного шара) при аффинном преобразовании $f(x)$.

### перспективное отображение

Перспективная функция — это такая функция $P(x,t)$,  которая действует из $\mathbb{R}^n\times\mathbb{R}_{++}$ в $\mathbb{R}^n$
$$P(x,t)=\frac{x}{t}$$
Эта функция умножает каждую компоненту вектора $(x,t)$ на положительное число $1/t$ так, чтобы последняя компонента стала равна единице и ее отбрасывает.

По аналогии с аффинной функцией образ и прообраз — выпуклые множества.

### линейно-дробное отображение

Линейно-дробная функция
$$f(x)=\frac{Ax+b}{c^Tx+d}$$
где $f(x)$ действует из $\mathbb{R}^n$ в $\mathbb{R}^m$, а облать определения $domf=\{x|c^Tx+d>0\}$ 

По аналогии с аффинной функцией образ и прообраз — выпуклые множества.

Любое линейно-дробное отображение представимо как суперпозиция двух отображений: перспективного и аффинного.

## коническое множество (конус)

Множество $X\subseteq \mathbb{R}^n$ — это **конус** если вместе с любой точкой $x\in X$ оно содержит все точки вида $\theta x$ при $\theta \in \mathbb{R}_+$

Множество $X\subseteq \mathbb{R}^n$ — это **выпуклый конус** если вместе с любыми точками $x_1, x_2\in X$ оно содержит все точки вида $\theta_1 x_1+\theta_2 x_2$ при $\theta_1,\theta_2 \in \mathbb{R}_+$

**примеры**

- $\mathbb{R}^n, 0, \varnothing$
- линейные подпространства
- $\{(x,|x|)\in \mathbb{R}^2\}$ — конус (не выпуклый)
- нормальный конус $\{(x,t) | \ ||x||\le t\}$, для $l_2$ называется *конусом второго порядка* или *Лоренцовым конусом*

### пространство симметричных матриц

Множество $\mathbb{S}^n$ — это множество всех симметричных матриц
$$\mathbb{S}^n=\{X\in \mathbb{R}^{n\times n}|X=X^T\}$$
По сути — это векторное пространство размерности $\frac{n(n+1)}{2}$.

Множество $\mathbb{S}^n_+$ — это множество всех симметричных матриц, которые являются неотрицательно определенными 
$$\mathbb{S}^n_+=\{X\in \mathbb{S}^n|X\succeq 0\}$$
Множество $\mathbb{S}^n_{++}$ — это множество всех симметричных матриц, которые являются положительно определенными 
$$\mathbb{S}^n_{++}=\{X\in \mathbb{S}^n|X\succ 0\}$$

$\mathbb{S}^n_+$ и $\mathbb{S}^n_{++}$ — это конусы (конические множества) в пространстве симметричных матриц $\mathbb{S}^n$.

Конус симметричных положительно полуопределенных матриц
$$\mathbb{S}^n_+=\{X\in \mathbb{S}^n|X\succeq 0\}$$
