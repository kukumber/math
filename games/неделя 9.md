# Вектор Шепли

Пусть у нас есть произвольная игра. Берем игроков, упорядочиваем произвольным образом и впускаем по одному. Сначала первый, затем второй, который добавляет дополнительный выигрыш первому. Затем третий, и снова дополнительный выигрыш, который он привнес в компанию к предыдущим двум. Такой дележ зависит от порядка. Шепли предложил усреднить на множестве всех порядков.

Вектор Шепли
$$Sh=\frac{1}{n!}\bigg\langle\sum division\bigg\rangle$$
В случае, когда три игрока $n!=6$, то есть усреднение производится по шести разным векторам, в зависимости от того, в каком порядке игроки входят.

Выигрыши были таковы:
$V[A]=18, V[B]=12, V[C]=6$
$V[AB]=114, V[AC]=108, V[BC]=30$
$V[ABC]=120$

Перечислим все порядки

|    | A  | B  | C  |
|----|----|----|----|
|**ABC** | 3  | 16 | 1  |
|**BAC** | 17 | 2  | 1  |
|**ACB** | 3  | 2  | 15 |
|**BCA** | 15 | 2  | 3  |
|**CAB** | 17 | 2  | 1  |
|**CBA** | 15 | 4  | 1  |
|    | 70 | 28 | 22 |

Это решение может быть оспорено. При подсчете таким способом, например $A$ и $B$ получают 98, однако изначально по условию их выигрыш составляет 114.


# Супермодулярные кооперативные игры

Следующие два свойства игры $V\in R^{2^N}$ эквивалентны:
1. Для любого игрока $i\in N$, а также для любой пары вложенных друг в друга коалиций $T\subset S\subset N$, причем $i \notin S$, выигрыш новой коалиции, за вычетом выигрыша старой (игроки приносят больший выигрыш в большие по включению коалиции)
$$v(S\sqcup i)-v[S]\ge v[T \sqcup i]-v[T]$$
2. Для любых произвольно взятых коалиций $S,T\subset N$ выигрыш, который достигается суммой объединения и пересечения не меньше выигрыша от суммы 
$$v[S\cup T] + v[S \cap T] \ge v[S] + v[T]$$

## определение - теорема
Игра, обладающая вышеперечисленными свойствами, называется супермодулярной.

## теорема о супермодулярных играх (SMD-играх)
Пусть $V$ — SMD-игра, тогда для любого упорядочения игроков $\sigma\in S_n$ делёж Шепли для этого упорядочения принадлежит ядру игры. Более того, эти дележи порождают ядро, то есть ядро игры является выпуклой оболочкой этих дележей.

# игра «Аэропорт»

Есть взлетная полоса и есть несколько авиакомпаний, котороые используют самолеты разного размера, которым требуется разная длина взлетной полосы. Полосу требуется поддерживать в хорошем состоянии, то есть, есть некоторые издержки, которые постоянно требуется нести.

Множество игроков — это множество авиакомпаний $N=\{1,2,\ldots,n\}$.

Как распределить издержки по обслуживанию взлетной полосы?

Это классическая кооперативная игра. Коалиция игроков $v[S]$ сама обслуживает взлетную полосу. Выигрыш равен издержкам
$$v[S]=-c\bigg(\max_{i\in S}l_i\bigg)$$
где $l_1, l_2, \ldots, l_n$ — это требования на длину полосы, и $c$ — произвольная неубывающая функция.

*Игра, заданная таким способом, всегда является супермодулярной.*


## проверка на супермодулярность

При присоединение игрока $i\notin S$ к большей коалиции $S$, выигрыш вырастает не меньше, чем при присоединении к меньшей коалиции $T$
$$T \subset S$$
Так как в этой игре выигрыш — это проигрыш, нужно проверять, что проигрыш увеличивается не больше, чем во втором случае. То есть нужно проверить:
$$v(S\sqcup i) - v(S)\ge v(T\sqcup i)- v(T)$$
или
$$c\bigg(\max_{j\in S\sqcup i} l_j\bigg)-c\bigg(\max_{j\in S} l_j \bigg)\le c\bigg(\max_{j\in T\sqcup i} l_j\bigg)-c\bigg(\max_{j\in T} l_j \bigg)$$
Итого, есть две коалиции авиаперевозчиков $T\subset S$.  Есть новый авиаперевозчик, который приходит в коалицию $S$. Левая часть неравенства — это необходимое удлинение взлетной полосы, которое благодаря новому перевозчику возникло. Если требование $l_i$ меньше, чем максимальное в $S$, то эта величина равна нулю, то есть он не вносит дополнительных издержек. В этом случае проверять ничего не требуется. Проверять следует тогда, когда требование на коалицию $S$ изменяется.

Так как $T\subset S$, к $T$ добавляется столько же или еще больше издержек.

##  вычисление вектора Шепли

Упорядочим требования
$$l_1\le l_2 \le \ldots\le l_n$$
тогда можно выписать числа, где $c_i$ — это стоимость обслуживания полосы $l_i$
$$c_i=c(l_i)$$
и требования можно переписать в издержках использования длины
$$c_1\le c_2 \le\ldots \le c_n$$
Тогда вектор Шепли
$$\frac{c_1}{n}+\frac{c_2-c_1}{n-1}+\frac{c_3-c-2}{n-2}+\ldots+\frac{c_{n-1}-c_{n-2}}{2}+ (c_n-c_{n-1})$$
В этой формуле первое слагаемое — это вектор Шепли первого перевозчика, два вторых слагаемых — вектор Шепли второго, и так далее.

То есть, первую часть полосы используют все перевозчики, поэтому они поровну делят расходы на нее, вторую — все за исключением первого и так далее.


# игра «Совет безопасности ООН»

В совете безопасности ООН 15 стран. 5 — постоянных членов и 10 — переменных. Если принимается какое-то решение, то требуется, чтобы все 5 постоянных членов проголосовали "за", но кроме того, "за" должны проголосовать как минимум три переменных, чтобы возник консенсус.

Игра имеет следующий вид. Коалицию называем выигрывающей, если она может принять решение, то есть есть 5 постоянных голосов $\{1,2,3,4,5 \in S\}$ и три переменных, то есть $|S|\ge 8$
$$v[S]=1$$
в противном случае
$$v[S]=0$$

## ядро

$$v[N]=1$$
значит в ядре по определнию лежат некоторые платежи 15-мерного симплекса
$$x_1+\ldots+x_{15}=1, x_i\ge0$$
Любой дележ называется *распределением сил*.

Кроме того, для любого решающего $S$ должно быть
$$\sum_{i\in S}x_i\ge1$$
Например,
$$x_1+x_2+\ldots+x_8=1$$
отсюда делается вывод, что
$$x_9=x_{10}=\ldots=x_{15}=0$$
В то же время в сумме 6-й, 7-й и 8-й были выбраны случайно, и вместо них можно было выбрать другие варианты.

В любой точке ядра нулю равны все компоненты, кроме первых пяти.
$$(x_1,\ldots,x_5,0,\ldots,0)$$
Любая коалиция $S$ содержит сумму этих пяти.

Ядро этой игры состоит из всех векторов, в которых силы влияния раскиданы между пятью постоянными членами. Переменные члены в любой точке ядра обладают нулевыми показателями влияния.

# вычисление вектора Шепли

В векторе Шепли значения $x_6, x_7, \ldots, x_{15}$ не будут равны нулю. Потому что можно предъявить конкретный порядок, при котором происходит следующее:
- заходит первый, коалиция не выигрывает — получает ноль
- второй — получает ноль
- все пять  — получают ноль
- только после восьмого случается выигрыш коалиции

Вектор будет выглядеть как
$$[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0]$$
потому что выгрыш случился при вхождении восьмого.

Поэтому существуют такие упорядочения, при которых игроки-непостоянные члены получают не нулевой выигрыш.

Получаются векторы вида
$$[a,a,a,a,a,b,b,b,b,b,b,b,b,b,b]$$
и $b$ будет равно
$$b=\frac{1}{1430}$$
Ядро не пусто и содержит все дележи, при которых сумма первых пяти компонент равна в точности единице, а остальные — нулю.

Вектор Шепли
$$5a + 10b =1$$
Он подтверждает идею, что переменные члены почти ничего не значат.