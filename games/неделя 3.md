# симметричные игры и симметричные стратегии

# игра "Белый аист"

На телевидении объявляют, что разыгрываются две бутылки коньяка "Белый аист". Если от телезрителей придет всего две смс, то оба приславших получат выигрыш, если придет больше двух смс, то выигрыш не получает никто.

Для того, чтобы найти равновесие, нужно понять, какой ваш лучший ответ на стратегии других игроков. Ответ на любую последовательность решений "посылать-не посылать", в которой не более, чем одно положительное решение, то есть ответ на последовательности, состоящие из всех нулей $[0,0,\dots,0,0,0,\dots,0,0]$ или на последовательность, имеющую только одну единицу $[0,0,\dots,0,1,0,\dots,0,0]$  будет "послать". Ответ на все остальное — "отказаться".

Получается, что все множества стратегий содержат два элемента:
$$S_1=S_2=\dots=S_{n+2}=\{0,1\}$$
В **симметричной игре** все стратегические множества совершенно одинаковы, функции выигрыша также одинаковы:
$$u_i(s_i,s_{-i})=u_i(s_i,s_j,s_{-ij})=u_j(s_j,s_i,s_{-ij})$$
то есть, нельзя различить игроков ни по их стратегическим множествам, ни по функциям выигрыша.

Равновесием в такой игре будет множество, в котором две единицы, а все остальные члены равны нулю
$$[0,0,0,\dots,0,1,0,\dots,0,1,0,\dots,0,0,0]$$
Если всем известно, что смс будут посылать эти два везунчика, то все остальные посылать не будут. Но это не симметричное равновесие.

---
## теорема
Если игра конечная, то есть списки игроков и стратегические множества конечны, то существует симметричное смешанное равновесие, то есть одна смешанная стратегия $\sigma^*$, такая, что все игроки применяют эту смешанную стратегию $(\sigma^*,\sigma^*,\sigma^*,\dots)$, является равновесием по Нэшу.

---

Смешанная стратегия такова, что с некоторой вероятностью смс посылается, и с некоторой — нет:
$$\sigma^*=p[1]+(p-1)[0]$$
Мы ищем такую вероятность послать смс, что если я верю, что все остальные $n+1$ игроков разыгрывают то же самое вероятностное распределение, то мне тоже подходит эта стратегия.

Выигрыш от "не послать смс" — это 0. Если я посылаю смс, то я сразу трачу -1, но с некоторой вероятностью я выиграю приз стоимостью $N$:
$$0=-1+qN$$
здесь $q$ — это функция от $p$
$$q=q(p)$$
где
$$q(p)=\frac{1}{N}$$
В симметричность игры вкладывается то, что эта стоимость $N$ одинакова для всех.

Осталось посчитать $q(p)$. Первое событие, когда я выигрываю, — это "никто не послал смс". Вероятность, что никто не послал смс
$$(1-p)^{n+1}$$
Также подходит ситуация, когда послана одна смс. Тогда вероятность, того, что я выиграю приз
$$\begin{aligned}
q(p)&=(1-p)^{n+1}+(n+1)p(1-p)^n=\\
&=(1-p)^n\big(1-p+(n+1)p\big)=\\
&=(1-p)^n(1+pn)=\frac{1}{N}
\end{aligned}$$
Решим уравнение приблизительно. Пусть $\beta=pn$, то есть вероятность $p$ примерно пропорциональна количеству людей.
$$\bigg(1-\frac{\beta}{n}\bigg)^n(1+\beta)=\frac{1}{N}$$
первая скобка при большом значении $n$ равна $e^\beta$
$$e^\beta(1+\beta)=\frac{1}{N}$$
и теперь перенесем
$$N(1+\beta)=e^\beta$$
пусть $N=1000$:
$$1000(1+\beta)=e^\beta$$
тогда 
$$\beta\approx 10$$
тогда ответ для вероятности
$$p\approx 1\%$$
Важно то, что вероятность того, что будет послано 0, 1 или 2 смс исчезающе мала
$$p[0,1,2]\approx1\%$$

# функции реакции. Аукцион второй цены

Продается некоторый объект и есть ровно два покупателя $N=\{1,2\}$ и ценность этого объекта для первого игрока равна $V_1$, а для второго — $V_2$. Пусть $V_1<V_2$ 

Допустим, два человека одновременно показывают свои ставки $b_1$ и $b_2$. У кого больше ставка, тот и получает картину с одним нюансом, что он платит не свою ставку, а второго. Если ставка одинакова, то бросается монетка и с равной вероятностью объект достается первому или второму. 

Предположим, что $b_2<V_1$, тогда эту ставку надо перебить, подставить любое число строго больше $b_2$. При $b_2=V_1$ первому игроку абсолютно все равно, кто выиграет аукцион. Если первый игрок выиграет, то ровно за ту цену, которую он готов заплатить. При ставках $b_2 > V_1$ первому аукцион нужно проиграть, поэтому необходимо назвать любую цену, меньшую, чем указал второй игрок.

Стратегия $b_1=V_1$ является слабо доминирующей.

# существование симметричного равновесия в симметричной игре

В любой симметричной игре с конечным множеством игроков и конечным множеством стратегий существует симметричное равновесие (чистое или смешанное).

Если $S$ — множество стратегий, то по нему строится множество 
$$S\mapsto \Delta(S) \subset \mathbb{R}^{|S|}$$
это симплекс, у которого элементы $S$ являются вершинами.

То есть $S$ в скобках — это множество всех наборов 
$$\{(\sigma_s)_{s\in S} | \sigma_s \ge 0, \sum_s \sigma_s=1\}$$
Ищется элемент из этого множества $\sigma^* \in \Delta(S)$, что оптимальный (наилучший) ответ на такой набор стратегий есть тоже $\sigma^*$.

$\arg\max$ — это множество всех стратегий, которые максимизируют функцию выигрыша.
$$\underset{\sigma \in \Delta(S)}{\arg\max} \ u_1(\sigma, \sigma^*, \dots,\sigma^*) \ni \sigma^*$$
Первым делом надо перебрать чистые стратегии и посмотреть какие из них дают какой выигрыш. Если некоторые чистые стратегии дают меньший выигрыш, чем некоторые другие, то эти чистые стратегии не будут использоваться ни с какой вероятностью. Смешанная стратегия может быть оптимальным ответом только тогда, когда все входящие в нее чистые стратегии являются оптимальными ответами среди чистых.
$$\underset{\sigma \in \Delta(S)}{\arg\max} \ u_1(\sigma, \sigma^*, \dots,\sigma^*)=\Delta\big(\underset{s_1\in S}{\arg\max} \ u_1(s_1, \sigma^*, \dots,\sigma^*)\big)$$
Если требуется найти равновесие, то нужно поглядеть, как будет выглядеть $\arg\max$ при различных значениях $\sigma^*$.

Если есть стратегия $\sigma$, то ей сопоставляется целая грань исходного симплекса
$$\Delta(S)\ni \sigma \mapsto \Delta\big(\underset{s\in S}{\arg\max}\ u_1(s, \sigma,\dots, \sigma)\big)$$
Это отображение многозначное, каждой точке симплекса сопоставляется целая грань
$$\Phi:\Delta(S)\rightrightarrows \Delta(S)$$
Иногда получается, что грань вырождается. То есть берется стратегия, подставляется в формулу и выясняется, что одна чистая является оптимальным ответом на смешанную, повторенную много раз.

Если есть какая-то стратегия, в ответ на которую все чистые стратегии равноценны, то такая смешанная стратегия заведомо входит в симметричное равновесие. В общей ситуации следует искать неподвижные точки такого отображения, точки, которые лежат в своем образе $\sigma \in \Phi$.

## теорема Брауэра
Если $x \subset \mathbb{R}^n$ конечномерный выпуклый компакт, а $f: X \mapsto X$ непрерывное отображение $X$ в себя, то существует такая неподвижная точка $x^*\in X$, что $f(x^*)=x^*$.

## теорема Какутани
Пусть $X\subset R^d$ — выпуклый компакт и есть многозначное отображение $\Phi: X\rightrightarrows X$ со следующими свойствами:

- состоит из точек, таких, что $\{(x, y)|y \in \Phi(x), x\in X\}\subset X \times X$
- у этого множества образы  $\forall x\in X: \Phi(x) \subset X$ — непустой выпуклый компакт

Тогда обязательно существует $x^* \in \Phi(x^*)$.

