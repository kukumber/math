# линковые кольца

Линковое кольцо — это структура в интернете, искусственным образом поднимающая себе и/или внешним сайтам рейтинг в поисковой системе с помощью создания плотной сети ссылок. Это чаще всего спамерская конструкция.

Двудольный граф, символизирующий линковое кольцо:
![[вебграфы/images/неделя 03-1.png|w50]]
Слева находятся те сайты, которые осуществляют накрутку, справа — сайты, получающие накрутку. Можно считать, что слева находятся относительно респектабельные сайты, но могут быть и спамеры.

С помощью моделей можно предсказывать такие конструкции. Полностью отловить их не удастся.

В социальных сетях такие конструкции встречаются без всякой дополнительной накрутки. Слева может быть сообщество, интересующееся какой-то темой, а справа — те стандартные сайты, которые обычно цитируются в соответствии с этим интересом.

Посмотрим на каждую вершину в левой доле и на каждую вершину в правой доле, и попробуем оценить вероятность существования ребра.
![[вебграфы/images/неделя 03.png|w50]]При этом обратим пристальное внимание на то, какую степень $k$ имеет данная вершина в левой доле и какую степень $l$ имеет вершина в правой доле.

Просуммируем по всем парам вершин в этом двудольном графе величины $p(k,l)$. Получившаяся сумма — ожидаемое количество ребер в данном графе. Если реальное число ребер сильно превышает ожидаемое — структура не естественна.

# количество ребер между вершинами заданных степеней

Пусть $G_n=(V_n, E_n)$ — граф ($n$ означает, что есть $n$ вершин). Пусть $d_1, d_2\in \mathbb{N}$ — степени, для которых будем вычислять суммарное количество ребер между вершинами этих степеней.

Определим $X_n(d_1,d_2)$ как общее число ребер между вершинами суммарных степеней $d_1$ и $d_2$ в $G_n$.

То есть, берем все возможные вершины степени $d_1$, все возможные вершины степени $d_2$ и для каждой пары таких вершин, вычисляем количество ребер. Затем суммируем по всем парам.

При подсчете ребер между вершинами одинаковой степени каждое ребро учитывается дважды. 

Петля дает вклад 2 в суммарную степень, потому что она и входящая и исходящая для данной вершины.

Из определения можно легко получить количество вершин степени $d\in\mathbb{N}$:
$$|\{v\in V_n: \deg v=d\}|=\frac{1}{d}\sum_{d_1}X_n(d_1,d)$$
Например,
![[вебграфы/images/неделя 03-2.png|w50]]
$n$ в этой сети равно 4, то есть четыре вершины.

Верхняя вершина имеет степень 11: 2 кратные петли, каждая из которых дает вклад 2 в суммарную степень, слева два входящих и одно исходящее, справа — три входящих и одно исходящее:
$$2\cdot 2+2 + 1 + 3 + 1 = 11$$
Точно также можно проверить остальные вершины.

Есть две пары вершин, имеющих степень 3 и 8 и есть 3 ребра, проходящих между этими парами:
![[вебграфы/images/неделя 03-3.png|w50]]Тогда $X(3,8)=3$.

Для случая $X(8,8)$, так как степени одинаковы, каждое ребро идет со степенью 2:
![[неделя 03-4.png|w50]]
Тогда $X(8,8)=6$.

Для $X(11,8) = 7$
![[неделя 03-5.png|w50]]
Для $X(11,3)=0$, потому что общих ребер нет.

# количество ребер между вершинами заданных степеней в модели Бакли-Остгуса

## Теорема (Гречников)

В модели Бакли-Остгуса с вероятностью, стремящейся к единице, при $n\to\infty$:
$$\frac{X_n(d_1,d_2)}{n}\sim c(a,m)\bigg(\frac{(d_1+d_2)^{1-a}}{d_1^2d_2^2}\bigg)$$
$m$ — это отношение количества ребер к количеству вершин в графе.

$c$ — это константа, зависящая от параметров $a$ и $m$.

$X_n$ — это случайная величина, определенна на пространстве случайных графов. Когда в эту величину подставляется конкретный граф, то она зависит от того, как этот граф выражается через параметры $a$ и $m$.

Если мы зафиксировали какое-то положительное число $\varepsilon$, то с вероятностью, стремящейся к единице, величина, которая стоит слева от $\sim$ , отличается больше, чем в $(1-\varepsilon)$ раз от величины, которая стоит справа от $\sim$.

Таким образом, если в модели Болобаша-Риордана:
$$EX=\Theta\bigg(\frac{1}{d_1^2d_2^2}\bigg)$$
то в модели Бакли-Остгуса:
$$EX=\Theta\bigg(\frac{(d_1+d_2)^{1-a}}{d_1^2d_2^2}\bigg)$$
и эти факты согласуются.

# соответствие модели Бакли-Остгуса реальному хост-графу

Предположим, что реальный хост-граф строился в модели Бакли-Остгуса, который зависит от одного параметра $a$ — начальная притягательность каждой вершины. Параметр $m$ можно зафиксировать, посчитав отношение числа вершин к числу ребер.

Можно попытаться найти оптимальное значение параметра $a$, посмотрев, когда распределение **степеней вершин** случайного графа в модели Бакли-Остгуса $(d^{-2-a})$ ближе всего к аналогичной характеристике в хост-графе.

Можно попытаться найти оптимальное значение параметра $a$, сравнивая **число** **ребер** между вершинами степеней $d_1$ и $d_2$ в хост-графе с $(d_1+d_2)^{1-a}d_1^{-2}d_2^{-2}$.

**утверждение**
В обоих случаях оптимальное значение притягательности одно и то же — $a\approx 0.27$.

Хост-граф очищается от кратных ребер, петель и ориентации.

Пусть $\#_{\text{Host}}(j)$ — число вершин степени $j$ в хост-графе. Кумулятивная функция распределения:
$$\widetilde\#_{\text{Host}}(d)=\sum_{j>d}\#_{\text{Host}}(j)$$
Пусть $X_{\text{Host}}(j_1,j_2)$ — число ребер между вершинами со степенями $j_1$ и $j_2$ в хост графе:
$$\widetilde{X}_{\text{Host}}(j_1,j_2)=\sum_{j_1\ge j_2,j_1>d_\max,j_2>d_\min}X_{\text{Host}}(j_1,j_2)$$
где $d_\max = \max(d_1,d_2)$, $d_\min=\min(d_1,d_2)$.

Пусть:
$$\widetilde{\rho}_{\text{Host}}(d_1,d_2)=\frac{\widetilde{X}_{\text{Host}}(j_1,j_2)}{\widetilde\#_{\text{Host}}(d_1)\widetilde\#_{\text{Host}}(d_2)}$$
Величина $\widetilde\#_{\text{Host}}(d)$ аппроксимировалась функцией
$$\mathcal{f}_{a_1,b_1}(d)=b_1\cdot d^{-1-a_1}$$
Так как была взята функция $\widetilde\#$, а не $\#$, то это означает, что проводилось интегрирование по все значениям, а это означает, что степень повышается на единицу, поэтому в степени не -2, а -1.
$$\frac{1}{|\mathcal{D_1}|}\sum_{d\in\mathcal{D}_1}\bigg(\sqrt{\widetilde\#_{\text{Host}}(d)}-\sqrt{\mathcal{f}_{a_1,b_1}(d)}\bigg)^2\to \min_{a_1,b_1}$$
где $\mathcal{D}_1=[10^{2.9},10^{5.9}]$.
![[неделя 03-6.png|w50]]
$a^\ast_1=0.2762$.

Величина $\widetilde{\rho}_{\text{Host}}(d_1,d_2)$ аппрокимировалась функцией 
$$g_{a_2,b_2}(d)=b_2(d_1+d_2)^{1-a_2}d_1^{a_2}d_2^{a_2}$$
![[неделя 03-7.png]]
$$\frac{1}{|\mathcal{D}_2|}\sum_{d_1,d_2\in\mathcal{D}_2}\bigg(\sqrt{\widetilde{\rho}_{\text{Host}}(d_1,d_2)}-\sqrt{g_{a_2,b_2}(d_1,d_2)}\bigg)\to\min_{a_2,b_2}$$
где $\mathcal{D}_2=\{(d_1,d_2)\in\mathcal{D}_1^2: d_1/d_2>10\}$.

$a^\ast_2=0.2774$

# классификация ссылочного спама

Пусть дан некоторый подграф $H$ хост-графа. Как можно автоматически проверить его на ссылочную накрутку?

**алгоритм**
- вычислим суммарные степени всех вершин графа $H$
- для каждой пары вершин графа $H$ найдем ожидаемое число ребер между ними с использованием результата шага 1 и результата Гречникова
- просуммируем величины, найденные на втором шаге
- сравним результат с числом ребер в графе $H$.  Если ребер в $H$ сильно больше, то что-то не так: либо это сообщество, либо — накрутка.

# корреляция степеней вершин и ассортативность

Пусть $G=(V,E)$ — граф без петель, кратных ребер и ориентации.

Определим **ожидаемую среднюю степень соседей** случайной вершины степени $d$:
$$d_{nn}(d)=\frac{1}{d\cdot|\{i:\deg i=d\}|}\sum_{i:\deg i=d}\sum_{\{i,j\}\in E}\deg j$$
Берем вершину, из которой исходит $d$ ребер и для каждого конца из ребер суммируем степень второго конца. Затем усредняем на $d$ и количество вершин степени $d$.

Если в графе есть петли, кратные ребра и ориентация, изменится внутреннее суммирование. Величина $\deg j$ входит во внутреннее суммирование столько раз, сколько есть ребер с концами $i,j$. При этом, если есть петли $(i,i)$, то каждая из них учитывается дважды.

Удобно выразить величину $d_{nn}$ в общем случае через $X_n(d_1,d_2)$:
$$d_{nn}(d)=\frac{\sum_{d_1}d_1X_n(d_1,d_2)}{\sum_{d_1}X_n(d_1,d_2)}$$
$d_{nn}$ называют *ассортативностью*. Обычно в реальных сетях $d_{nn}(d)\sim d^\delta$.

Если $\delta<0$, сеть называется *дисассортативной*
![[неделя 03-9.png|w50]]
Если $\delta>0$, сеть называется ассортативной. Социальные сети, как правило, ассортативны
![[неделя 03-10.png|w50]]
